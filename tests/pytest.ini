[pytest]
# Pytest Configuration for Symphainy Platform v1
# Clean rebuild - platform-first architecture

# Python path configuration
pythonpath = 
    .
    ../

# Test discovery
testpaths = .
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Command line options
addopts =
    -v
    --tb=short
    --strict-markers
    --disable-warnings
    --asyncio-mode=auto
    --color=yes
    -ra
    --timeout=60
    --timeout-method=thread

# Test markers
markers =
    # Test types
    unit: Unit tests (fast, isolated)
    integration: Integration tests (multiple components)
    e2e: End-to-end tests (full platform)
    smoke: Quick smoke tests
    contract: Contract validation tests
    
    # Component categories
    runtime: Runtime Plane tests
    agentic: Agent Foundation tests
    realms: Realm tests
    experience: Experience Plane tests
    smart_city: Smart City service tests
    content: Content realm tests
    insights: Insights realm tests
    journey: Journey realm tests
    solution: Solution realm tests
    infrastructure: Infrastructure adapter tests
    
    # Parsing categories
    parsing: Parsing-related tests
    mainframe: Mainframe/binary parsing tests
    pdf: PDF parsing tests
    
    # Speed markers
    fast: Fast tests (< 1 second)
    slow: Slow tests (> 1 second)
    
    # Timeout markers
    timeout_10: Test with 10 second timeout
    timeout_30: Test with 30 second timeout
    timeout_60: Test with 60 second timeout
    
    # Priority markers
    critical: Critical tests (must pass for production)
    
    # Special categories
    security: Security-related tests
    security_guard: Security Guard tests
    librarian: Librarian related tests
    wal: WAL pattern tests
    saga: Saga pattern tests
    session: Session lifecycle tests
    state: State surface tests
    execution: Execution control tests

# Warnings filter
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning

# Logging
log_cli = false
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(message)s
log_cli_date_format = %Y-%m-%d %H:%M:%S
